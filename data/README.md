# Data Guide (`data/builds.json`)

This file powers the site. It is **manually maintained** (or generated by separate tooling) and fetched by the client at runtime.

## Shape (depth-based by Minecraft version)
```json
{
  "updatedAt": "2025-01-05",
  "versions": {
    "1.21.1": [
      {
        "id": "jsmacros-2.1.0-1.21.1-fabric",
        "repo": "JsMacros/JsMacros",
        "fork": "JsMacros",
        "commit": "<sha>",
        "jsMacrosVersion": "2.1.0",
        "modLoader": ["fabric"],
        "extensions": ["luaj", "js", "jython"],
        "downloads": [
          {
            "name": "jsmacros-2.1.0-1.21.1-fabric.jar",
            "platform": "fabric",
            "url": "https://...",
            "checksum": "sha256:..."
          }
        ],
        "releaseType": "release",
        "status": "supported",
        "publishedAt": "2024-12-20",
        "notes": "Requires Fabric API >= 0.102"
      }
    ]
  }
}
```

### Field reference
- `updatedAt` (string, ISO date): when the dataset was last updated.
- `versions` (object): keys are exact Minecraft versions (minor updates matter).
  - Each value is an array of builds for that Minecraft version.
    - `id` (string): stable unique key per build.
    - `repo` (string): `owner/repo` where the build comes from.
    - `fork` (string): human-readable fork name (e.g., `JsMacros`, `ForkyMacros`).
    - `commit` (string, sha): commit used for the build.
    - `jsMacrosVersion` (string): the JsMacros version/tag.
    - `modLoader` (array<string>): allowed values: `fabric`, `forge`, `neoforge`.
    - `extensions` (array<string>): e.g., `luaj`, `js`, `jython`, `jep`.
    - `downloads` (array):
      - `name` (string): filename.
      - `platform` (string | string[]): `fabric`, `forge`, `neoforge`, `extension`, `ts`, `python`, or `other`. Arrays are allowed when one file serves multiple platforms.
      - `url` (string): download URL.
      - `checksum` (string, optional): recommend `sha256:...`.
      - `notes` (string, optional): per-download notes if needed.
    - `releaseType` (string): `release`, `beta`, or `nightly`.
    - `status` (string, optional): `supported`, `deprecated`, or `experimental`.
    - `publishedAt` (string, optional, ISO date): when the build was published.
    - `notes` (string, optional): free-form notes/requirements.

### Contributing data
1) Edit `data/builds.json` (or regenerate it with your tooling). Keep entries sorted by Minecraft version and prefer newest-first within each array.
2) Ensure `id` stays unique and stable. A good pattern is `fork-jsmacrosVersion-mcVersion-loader`.
3) Run validation: `npm run validate:data`.
4) Commit the updated JSON. CI will also run validation on pull requests.

### Validation
- See `scripts/validate.ts` for the Zod schema.
- GitHub Action at `.github/workflows/validate-data.yml` runs the validator on every push/PR.
